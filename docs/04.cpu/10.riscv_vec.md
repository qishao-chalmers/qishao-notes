---
title: RISC-V Vector Extension
date: 2024-11-05 15:32:49
permalink: /pages/cc7043/
---

## RISCV Vector Extension

### Registers

[source](https://eupilot.eu/wp-content/uploads/2022/11/RISC-V-VectorExtension-1-1.pdf)

- V0-V31 32 vector registers

VLEN: vector register length: 128, 256, 512, 1024

ELEN: element length 8,16,32,64

![image](https://github.com/user-attachments/assets/74ba9d30-e9ed-450f-b2db-cd729d75ad21)

- vtype(vector type)
  - sew: standard element width. SEW determines how the vector register is subdivided — e.g., for SEW=32 and VLEN=256, a vector register can hold 8 elements.
  - lmul: Vector Register Group Multiplier. 1/8, 1/4, 1/2, 1, 2, 4, 8. LMUL > 1 means one logical vector spans multiple physical vector registers.

![image](https://github.com/user-attachments/assets/8e74dffc-3f46-4740-a019-ba29fc6713ee)

## Ara: A 1 GHz+ Scalable and Energy-Efficient RISC-V Vector Processor with Multi-Precision Floating Point Support in 22 nm FD-SOI

![image](https://github.com/user-attachments/assets/5f29511b-d741-415e-963d-910ccd9c429d)

**Sequencer** solves structural hazard by delaying issue and *data hazard is just marked, will be solved by downstream*.
it also keeps state of running function.

**Slide unit** (SLDU) responsible for vector extraction, vector shuffles and vector slides.

**Vector load/store unit**:
- unit-stride loads and stores
- constant-stride memory operation
- scatters and gathers

### **Lane**

#### lane sequencer

Lane sequence solves data dependency by self-regulated process, through back pressure due to unvailable operands.

#### vector register file

**In RISC-V’s vector extension, the predicated multiplyadd instruction is the worst case regarding throughput, reading four operands to produce one result.**

It is composed a set of single ported (1RW) banks.

And the width of each bank is constrained to the datapath width of each lane, 64 bits.

Register file consists eight banks to support 5 banks for predicated multiply-add operation.

The VRF (eight 64-bit wide 1RW banks) is replicated at each lane and all inter-lane communication is concentraed at the VLSU and SLDU.

To solve bank conflicts, this is vector registers are mapped into banks in "barber's pole" position.

![image](https://github.com/user-attachments/assets/4975f9e5-7c75-4d82-b8ea-a299be86b7d4)


#### operand queues

#### execution units
